___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Eye One Accessibility Widget",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "description": "Official GTM template for loading the Eye One Accessibility Widget.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "apiKey",
    "displayName": "API Key",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Import GTM sandbox APIs
const injectScript = require('injectScript');
const setInWindow = require('setInWindow');

// Retrieve the API key from the user-provided field
const apiKey = data.apiKey;

// Basic validation: ensure API key is provided
if (!apiKey || typeof apiKey !== 'string') {
  // No API key, cannot proceed
  data.gtmOnFailure();
  return;
}

// Set the API key in the global window context for the widget to read.
// (Avoid direct window access; use setInWindow)
setInWindow('EyeOneAccessibilityKey', apiKey, true);  // Key name can be the expected global variable for the widget

// Define the widget script URL (provided by Eye One/All-in-One Accessibility service).
// This URL is where the accessibility widget script is hosted.
const widgetScriptUrl = 'https://public.eye.one/widget/e1-accessibility-widget.iife.js'; 
// ^ Example URL: replace with the actual URL given by Eye One Accessibility for their widget script

// Inject the external script asynchronously
injectScript(widgetScriptUrl, data.gtmOnSuccess, data.gtmOnFailure);


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "EyeOneAccessibilityKey"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://public.eye.one/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 5/6/2025, 1:27:08 PM


